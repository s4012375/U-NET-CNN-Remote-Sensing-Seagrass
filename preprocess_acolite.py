#### Image pre-processing ####
# ACOLITE
import matplotlib as plt
import sys, os, time
sys.path.append("acolite-main/")
import acolite as ac

# Variable names
PATCH_SIZE = (64, 64, 3)
IMAGERY_DIR = 'C:\\Users\\Lizzie\\Documents\\assignment_code\\datasets\\imagery\\'#'.\\datasets\\imagery\\'
SHAPEFILE_DIR = '.\\datasets\\shapefile\\'

IMAGES = ['s20191211','s20191027','s20190627','s20190227', 's20190123',
          's20181224','s20181010','s20180624','s20171126','s20171116',
          's20170717','s20170525','s20170125','s20161226','s20161129',
          's20161116','s20160609','s20160420','s20160210','s20151125']

IMAGERY_ID = {'s20191211':'S2A_MSIL1C_20191211T112451_N0500_R037_T30UWG_20230607T111953.SAFE',
              's20191027':'S2B_MSIL1C_20191027T112119_N0500_R037_T30UWG_20230614T154510.SAFE',
              's20190627':'S2A_MSIL1C_20190627T113321_N0500_R080_T30UWG_20230716T095057.SAFE',
              's20190227':'S2A_MSIL1C_20190227T113311_N0207_R080_T30UWG_20190227T133051.SAFE',
              's20190123':'S2B_MSIL1C_20190123T113359_N0207_R080_T30UWG_20190123T115441.SAFE',
              's20181224':'S2B_MSIL1C_20181224T113459_N0207_R080_T30UWG_20181224T115652.SAFE',
              's20181010':'S2A_MSIL1C_20181010T113321_N0206_R080_T30UWG_20181010T133915.SAFE',
              's20180624':'S2B_MSIL1C_20180624T112109_N0206_R037_T30UWG_20180624T132741.SAFE',
              's20171126':'S2B_MSIL1C_20171126T112359_N0206_R037_T30UWG_20171126T132429.SAFE',
              's20171116':'S2B_MSIL1C_20171116T112319_N0206_R037_T30UWG_20171116T131734.SAFE',
              's20170717':'S2A_MSIL1C_20170717T113321_N0205_R080_T30UWG_20170717T113326.SAFE',
              's20170525':'S2A_MSIL1C_20170525T112121_N0205_R037_T30UWG_20170525T112434.SAFE',
              's20170125':'S2A_MSIL1C_20170125T112331_N0204_R037_T30UWG_20170125T112333.SAFE',
              's20161226':'S2A_MSIL1C_20161226T112452_N0204_R037_T30UWG_20161226T112454.SAFE',
              's20161129':'S2A_MSIL1C_20161129T113432_N0204_R080_T30UWG_20161129T113427.SAFE',
              's20161116':'S2A_MSIL1C_20161116T112332_N0204_R037_T30UWG_20161116T112335.SAFE',
              's20160609':'S2A_MSIL1C_20160609T112122_N0202_R037_T30UWG_20160609T112443.SAFE',
              's20160420':'S2A_MSIL1C_20160420T112112_N0201_R037_T30UWG_20160420T112242.SAFE',
              's20160210':'S2A_MSIL1C_20160210T112212_N0201_R037_T30UWG_20160210T112214.SAFE',
              's20151125':'S2A_MSIL1C_20151125T113412_N0204_R080_T30UWG_20151125T113411.SAFE'
}

# Pre-processes each tile with acolite dsf
for img in IMAGES[16:17]:
    settings = {
        "inputfile": IMAGERY_DIR + IMAGERY_ID[img],
        "output":".\\Output_Cirrus_Change\\",
        "s2_target_res":10, # High resolution result
        "limit":[55.3886, -1.969881, 55.725, -1.524109], # To help handle memory usage
        "l2r_export_geotiff":True, # Wants geotiff
        "rgb_rhot": False,
        "l2w_export_geotiff": True,
        "l2w_mask": True}
    ac.acolite.acolite_run(settings=settings)
